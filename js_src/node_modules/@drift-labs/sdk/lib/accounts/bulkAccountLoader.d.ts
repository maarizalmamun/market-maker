/// <reference types="node" />
/// <reference types="node" />
import { Commitment, Connection, PublicKey } from '@solana/web3.js';
import { BufferAndSlot } from '@drift-labs/sdk/lib/accounts/types';
type AccountToLoad = {
    publicKey: PublicKey;
    callbacks: Map<string, (buffer: Buffer, slot: number) => void>;
};
export declare class BulkAccountLoader {
    connection: Connection;
    commitment: Commitment;
    pollingFrequency: number;
    accountsToLoad: Map<string, AccountToLoad>;
    bufferAndSlotMap: Map<string, BufferAndSlot>;
    errorCallbacks: Map<string, (e: any) => void>;
    intervalId?: NodeJS.Timer;
    loadPromise?: Promise<void>;
    loadPromiseResolver: () => void;
    lastTimeLoadingPromiseCleared: number;
    mostRecentSlot: number;
    constructor(connection: Connection, commitment: Commitment, pollingFrequency: number);
    addAccount(publicKey: PublicKey, callback: (buffer: Buffer, slot: number) => void): Promise<string>;
    removeAccount(publicKey: PublicKey, callbackId: string): void;
    addErrorCallbacks(callback: (error: Error) => void): string;
    removeErrorCallbacks(callbackId: string): void;
    chunks<T>(array: readonly T[], size: number): T[][];
    load(): Promise<void>;
    loadChunk(accountsToLoadChunks: AccountToLoad[][]): Promise<void>;
    handleAccountCallbacks(accountToLoad: AccountToLoad, buffer: Buffer, slot: number): void;
    getBufferAndSlot(publicKey: PublicKey): BufferAndSlot | undefined;
    startPolling(): void;
    stopPolling(): void;
    log(msg: string): void;
    updatePollingFrequency(pollingFrequency: number): void;
}
export {};
